<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${usuario.idUsuario == null ? 'Nuevo Usuario' : 'Editar Usuario'}"></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-4">
        <h1 th:text="${usuario.idUsuario == null ? 'Nuevo Usuario' : 'Editar Usuario'}"></h1>
        
        <form th:action="@{/usuarios}" th:object="${usuario}" method="post" class="needs-validation" novalidate>
            <input type="hidden" th:field="*{idUsuario}">
            
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="primerNombre" class="form-label">Primer Nombre</label>
                    <input type="text" class="form-control" id="primerNombre" th:field="*{primerNombre}" required>
                    <div class="invalid-feedback">Por favor ingrese el primer nombre</div>
                </div>
                
                <div class="col-md-6">
                    <label for="segundoNombre" class="form-label">Segundo Nombre</label>
                    <input type="text" class="form-control" id="segundoNombre" th:field="*{segundoNombre}">
                </div>
                
                <div class="col-md-6">
                    <label for="primerApellido" class="form-label">Primer Apellido</label>
                    <input type="text" class="form-control" id="primerApellido" th:field="*{primerApellido}" required>
                    <div class="invalid-feedback">Por favor ingrese el primer apellido</div>
                </div>
                
                <div class="col-md-6">
                    <label for="segundoApellido" class="form-label">Segundo Apellido</label>
                    <input type="text" class="form-control" id="segundoApellido" th:field="*{segundoApellido}">
                </div>
                
                <div class="col-md-6">
                    <label for="rol" class="form-label">Rol</label>
                    <select class="form-select" id="rol" th:field="*{rol}" required>
                        <option value="">Seleccione un rol...</option>
                        <option th:each="rol : ${roles}" th:value="${rol}" th:text="${rol}"></option>
                    </select>
                    <div class="invalid-feedback">Por favor seleccione un rol</div>
                </div>
                
                <div class="col-md-6">
                    <label for="correo" class="form-label">Correo</label>
                    <input type="email" class="form-control" id="correo" th:field="*{correo}" required>
                    <div class="invalid-feedback">Por favor ingrese un correo v치lido</div>
                </div>
                
                <div class="col-md-6">
                    <label for="contrasena" class="form-label">Contrase침a</label>
                    <input type="password" class="form-control" id="contrasena" th:field="*{contrasena}" required>
                    <div class="invalid-feedback">Por favor ingrese una contrase침a</div>
                </div>
            </div>
            
            <button type="submit" class="btn btn-primary mt-3">Guardar</button>
            <a href="/usuarios" class="btn btn-secondary mt-3 ms-2">Cancelar</a>
        </form>
    </div>
    
    <script>
        // Validaci칩n del formulario
        (() => {
            'use strict'
            const forms = document.querySelectorAll('.needs-validation')
            
            Array.from(forms).forEach(form => {
                form.addEventListener('submit', event => {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }
                    
                    form.classList.add('was-validated')
                }, false)
            })
        })()
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>